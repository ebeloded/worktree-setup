# Repository Guidelines

## Project Structure & Module Organization
This package is a small TypeScript CLI/library for automating Git worktree setup.
- `src/`: source modules
- `src/cli.ts`: CLI entrypoint (`worktree-setup`)
- `src/setup.ts`: setup orchestration (copy files, run commands, write marker)
- `src/git.ts`: worktree detection logic
- `src/types.ts`: shared TypeScript types
- `dist/`: compiled output published to npm (generated by `bun run build`)
- `.github/workflows/publish.yml`: release-triggered publish pipeline

## Build, Test, and Development Commands
- `bun install`: install dependencies.
- `bun run build`: compile TypeScript from `src/` to `dist/` using `tsc`.
- `bunx worktree-setup --verbose`: run the CLI locally with detailed logs.
- `bun run prepublishOnly`: pre-publish check (currently runs build).

Example local dev loop:
```bash
bun install
bun run build
bunx worktree-setup --verbose
```

## Coding Style & Naming Conventions
- Language: TypeScript (ESM, NodeNext, strict mode).
- Indentation: 2 spaces; keep files ASCII unless required.
- Naming: `camelCase` for variables/functions, `PascalCase` for types/interfaces, descriptive module names (`setup.ts`, `git.ts`).
- Use explicit exported types from `src/index.ts` to keep the public API clear.

## Testing Guidelines
There is no automated test suite yet.
- Validate changes by running `bun run build` and a manual CLI smoke test with `--verbose`.
- If adding tests, place them near source as `*.test.ts` or under `tests/`, and document the run command in `package.json`.
- Prioritize coverage for worktree detection, file-copy idempotency, and command execution behavior.

## Commit & Pull Request Guidelines
Recent history uses short, imperative commit subjects (e.g., `Switch from npm to bun`). Follow that pattern:
- Keep subject lines concise and action-oriented.
- Scope commits to one logical change.

For pull requests:
- Describe what changed and why.
- Include manual verification steps/commands run.
- Link related issues/releases when applicable.
- For behavior changes, include sample CLI output (especially verbose mode).

## Release & Configuration Notes
Publishing is triggered by a GitHub Release (`published`) via `.github/workflows/publish.yml`. Ensure `dist/` builds cleanly and `NPM_TOKEN` is configured in repository secrets.
